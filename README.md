# M5_mini4tools_2.0.0 試作ver

これはM5シリーズ(現在はM5StickC)を使用したミニ四駆用のツールプログラムです。

☆下記はメニューと機能紹介です。

[raptimer]
Aボタンを押すとwaitが表示されます。
IR近接センサーに変化が無ければreadyに変化します。
IR近接センサーに変化があれば測定を開始します。
3秒以降でIR近接センサーに変化があれば測定を停止します。

[test]
距離と更新速度を表示します。
うまく反応しないときは、このモードで狙ったタイミングで距離が変化するか確認してください。

[setting]
現在は使用しません
前の仕様の名残です。
無視してください。

その他
プログラムを整理し切れておらず、無駄な記載もありますが今後（多分）整理していきます。

☆使用方法
M5_mini4toolsのフォルダにあるプログラムをarduino IDEを使用してM5StickCに書き込んでください。

☆回路の作成方法
[raptimer用]
26pinがIR近接センサーの出力になります。
pinの出力電流が足りないため、トランジスタかFETで3.3Vを供給するように回路を工夫する必要があります。
36pinがIR近接センサーの入力になります。

[電流解析用]
32pin(FFT_display.hに記載があるので変更する場合は書き換えてください)に[ACS712ELCTR-05B-T]を分圧して接続します。
電流センサーが5V出力なので必ず分圧するようにしてください。



過去の経緯
※ToFセンサーと振動センサでの計測は信頼性に難があったため、IR(赤外線)近接センサーに切り替えました。
・ToFセンサーはサンプリング周期が不足しており、速度が速い場合は反応しない事がありました。
・振動センサはおそらく可能ですが、調整が大変な為断念しました。
（振動の中心値の算出と隣のレーンのフィルタリングで手間がかかりそうでした）
